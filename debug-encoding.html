<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¼–ç æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .result {
            background: #f8f9fa;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            white-space: pre-wrap;
            font-family: monospace;
            font-size: 14px;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #0056b3;
        }
        .error {
            color: #dc3545;
        }
        .success {
            color: #28a745;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ç¼–ç é—®é¢˜è°ƒè¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•ä¸­æ–‡ç¼–ç é—®é¢˜</p>

        <div class="test-section">
            <h3>ğŸ“¸ ç›¸å†ŒAPIæµ‹è¯•</h3>
            <button onclick="testAlbums()">æµ‹è¯•ç›¸å†Œæ•°æ®</button>
            <div id="albums-result" class="result"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ“ ç¬”è®°APIæµ‹è¯•</h3>
            <button onclick="testNotes()">æµ‹è¯•ç¬”è®°æ•°æ®</button>
            <div id="notes-result" class="result"></div>
        </div>

        <div class="test-section">
            <h3>âœ… å¾…åŠäº‹é¡¹APIæµ‹è¯•</h3>
            <button onclick="testTodos()">æµ‹è¯•å¾…åŠæ•°æ®</button>
            <div id="todos-result" class="result"></div>
        </div>

        <div class="test-section">
            <h3>ğŸ” å­—ç¬¦ç¼–ç åˆ†æ</h3>
            <button onclick="analyzeEncoding()">åˆ†æç¼–ç é—®é¢˜</button>
            <div id="encoding-result" class="result"></div>
        </div>
    </div>

    <script>
        async function testAlbums() {
            const result = document.getElementById('albums-result');
            try {
                const response = await fetch('https://c0a45d30.baoandkai.pages.dev/api/albums');
                const data = await response.json();
                
                result.innerHTML = 'ğŸ“Š ç›¸å†Œæ•°æ®ï¼š\n';
                result.innerHTML += `ğŸ“ ç›¸å†Œæ•°é‡: ${data.length}\n`;
                
                data.forEach(album => {
                    result.innerHTML += `\nğŸ“¸ ${album.name} (${album.photos?.length || 0}å¼ ç…§ç‰‡)\n`;
                    result.innerHTML += `   æè¿°: ${album.description || 'æ— æè¿°'}\n`;
                    result.innerHTML += `   åˆ›å»ºæ—¶é—´: ${album.created_at}\n`;
                });
                
                result.className = 'result success';
            } catch (error) {
                result.innerHTML = 'âŒ è·å–ç›¸å†Œæ•°æ®å¤±è´¥: ' + error.message;
                result.className = 'result error';
            }
        }

        async function testNotes() {
            const result = document.getElementById('notes-result');
            try {
                const response = await fetch('https://c0a45d30.baoandkai.pages.dev/api/notes');
                const data = await response.json();
                
                result.innerHTML = 'ğŸ“ ç¬”è®°æ•°æ®ï¼š\n';
                result.innerHTML += `ğŸ“ ç¬”è®°æ•°é‡: ${data.length}\n`;
                
                data.forEach(note => {
                    result.innerHTML += `\nğŸ’­ ${note.content}\n`;
                    result.innerHTML += `   é¢œè‰²: ${note.color}\n`;
                    result.innerHTML += `   åˆ›å»ºæ—¶é—´: ${note.created_at}\n`;
                });
                
                result.className = 'result success';
            } catch (error) {
                result.innerHTML = 'âŒ è·å–ç¬”è®°æ•°æ®å¤±è´¥: ' + error.message;
                result.className = 'result error';
            }
        }

        async function testTodos() {
            const result = document.getElementById('todos-result');
            try {
                const response = await fetch('https://c0a45d30.baoandkai.pages.dev/api/todos');
                const data = await response.json();
                
                result.innerHTML = 'âœ… å¾…åŠäº‹é¡¹æ•°æ®ï¼š\n';
                result.innerHTML += `ğŸ“‹ å¾…åŠæ•°é‡: ${data.data.length}\n`;
                
                data.data.forEach(todo => {
                    result.innerHTML += `\nğŸ¯ ${todo.title}\n`;
                    result.innerHTML += `   æè¿°: ${todo.description}\n`;
                    result.innerHTML += `   çŠ¶æ€: ${todo.status}\n`;
                });
                
                result.className = 'result success';
            } catch (error) {
                result.innerHTML = 'âŒ è·å–å¾…åŠæ•°æ®å¤±è´¥: ' + error.message;
                result.className = 'result error';
            }
        }

        function analyzeEncoding() {
            const result = document.getElementById('encoding-result');
            const testStrings = [
                'æµ‹è¯•ç›¸å†Œ',
                'æ¨å­æºçš„27å²ç”Ÿæ—¥', 
                'åŒ…åŒ…çš„25å²ç”Ÿæ—¥',
                'Ã¥Ã¥Ã¦Â³Ã¦Â·Â»Ã¥Â Ã¤ÂºÃ¤Â»Ã¤Â¹Ã¥Ã¥Â®Â¹Ã¥Â¢',
                'Ã§Â»Ã¥Ã¥Ã¤Â¹Â°LV!'
            ];
            
            result.innerHTML = 'ğŸ” ç¼–ç åˆ†æï¼š\n';
            testStrings.forEach(str => {
                result.innerHTML += `\n"${str}"\n`;
                result.innerHTML += `   UTF-8ç¼–ç : ${encodeURIComponent(str)}\n`;
                result.innerHTML += `   å­—ç¬¦é•¿åº¦: ${str.length}\n`;
            });
            
            result.className = 'result';
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.addEventListener('load', () => {
            testAlbums();
            testNotes();
            testTodos();
        });
    </script>
</body>
</html>