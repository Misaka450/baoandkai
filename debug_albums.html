<!DOCTYPE html>
<html>
<head>
    <title>相册数据调试工具</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .album { border: 1px solid #ccc; margin: 10px 0; padding: 10px; }
        .photo { display: inline-block; margin: 5px; }
        .photo img { max-width: 100px; max-height: 100px; }
        pre { background: #f5f5f5; padding: 10px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>相册数据调试</h1>
    <button onclick="loadAlbums()">刷新数据</button>
    <div id="debug-info"></div>

    <script>
        function loadAlbums() {
            const albums = JSON.parse(localStorage.getItem('albums') || '[]');
            const debugDiv = document.getElementById('debug-info');
            
            debugDiv.innerHTML = `<h2>找到 ${albums.length} 个相册</h2>`;
            
            albums.forEach((album, index) => {
                debugDiv.innerHTML += `
                    <div class="album">
                        <h3>相册 ${index + 1}: ${album.name}</h3>
                        <p><strong>描述:</strong> ${album.description || '无描述'}</p>
                        <p><strong>照片数量:</strong> ${album.photos?.length || 0}</p>
                        <p><strong>封面:</strong> ${album.cover_image ? '有' : '无'}</p>
                        
                        <h4>照片列表:</h4>
                        <div>
                            ${album.photos?.map((photo, i) => `
                                <div class="photo">
                                    <img src="${photo.url || photo}" alt="照片 ${i + 1}" 
                                         onerror="this.style.display='none'; this.nextElementSibling.style.display='block'">
                                    <div style="display:none; color:red;">图片加载失败</div>
                                    <br>照片 ${i + 1}
                                </div>
                            `).join('') || '无照片'}
                        </div>
                        
                        <h4>原始数据:</h4>
                        <pre>${JSON.stringify(album, null, 2)}</pre>
                    </div>
                `;
            });
        }
        
        // 页面加载时自动加载数据
        loadAlbums();
    </script>
</body>
</html>