# 包&恺情侣空间网站 💕

一个专为情侣打造的回忆记录平台，记录你们在一起的每一个美好瞬间。

## ✨ 功能特色

### 🎯 核心功能
- **💞 爱情计时器**：实时显示在一起的时间，精确到秒
- **📅 时间轴**：按时间倒序展示重要事件和回忆
- **📸 相册管理**：创建多个相册，上传和管理美好照片
- **🍽️ 美食打卡**：记录一起品尝的美食和餐厅评价
- **✅ 待办事项**：共同规划和管理待办事项，支持完成状态追踪
- **🎨 后台管理**：轻松管理所有内容和设置

### 🚀 新增功能
- **📋 待办事项管理**：
  - 创建、编辑、删除待办事项
  - 设置优先级、分类、截止日期
  - 完成状态追踪（待办/进行中/已完成）
  - 完成照片上传和心得记录
- **🎨 界面美化**：
  - 毛玻璃卡片效果
  - 渐变色彩设计
  - 响应式布局适配
- **☁️ 云存储**：使用Cloudflare R2存储所有图片

## 技术栈

- **前端**：React + Vite + Tailwind CSS
- **后端**：Cloudflare Workers
- **数据库**：Cloudflare D1 (SQLite)
- **文件存储**：Cloudflare R2
- **部署**：Cloudflare Pages

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 本地开发

```bash
npm run dev
```

### 3. 构建项目

```bash
npm run build
```

### 4. 部署到Cloudflare

#### 4.1 配置Cloudflare资源

1. 创建D1数据库：
```bash
wrangler d1 create couple-moments-db
```

2. 创建R2存储桶：
```bash
wrangler r2 bucket create couple-moments-images
```

3. 更新`wrangler.toml`中的数据库和存储桶ID

#### 4.2 初始化数据库

```bash
wrangler d1 execute couple-moments-db --file=./migrations/init.sql
```

#### 4.3 部署Workers

```bash
wrangler deploy
```

#### 4.4 部署Pages

```bash
npm run build
wrangler pages deploy dist
```

## 📁 项目结构

```
包&恺情侣空间/
├── src/                    # 前端源码
│   ├── components/         # 公共组件
│   │   ├── ImageUploader.jsx    # 图片上传组件
│   │   ├── AdminModal.jsx       # 管理后台模态框
│   │   └── StickyNotes.jsx      # 便签组件
│   ├── contexts/          # React上下文
│   │   └── AuthContext.jsx      # 认证上下文
│   ├── hooks/             # 自定义Hook
│   ├── pages/             # 页面组件
│   │   ├── Home.jsx              # 首页（爱情计时器）
│   │   ├── Timeline.jsx          # 时间轴
│   │   ├── Albums.jsx            # 相册管理
│   │   ├── FoodCheckin.jsx       # 美食打卡
│   │   ├── Todos.jsx             # 待办事项
│   │   └── admin/                # 后台管理
│   │       ├── AdminTodos.jsx    # 待办事项管理
│   │       ├── AdminAlbums.jsx   # 相册管理
│   │       └── AdminSettings.jsx # 系统设置
│   ├── utils/             # 工具函数
│   │   ├── api.js                # API请求封装
│   │   └── r2Upload.js           # R2上传工具
│   └── index.css          # 全局样式
├── functions/             # Cloudflare Functions API
│   ├── api/
│   │   ├── todos/                # 待办事项API
│   │   ├── albums/               # 相册API
│   │   ├── food/                 # 美食打卡API
│   │   ├── upload/               # 文件上传API
│   │   └── ...
├── migrations/            # 数据库迁移脚本
│   ├── init.sql                  # 初始化数据库
│   ├── add_todos.sql             # 待办事项表
│   └── ...
├── wrangler.toml         # Cloudflare配置
├── package.json          # 项目依赖
└── README.md            # 项目说明
```

## 环境变量

在`wrangler.toml`中配置：

- `DATABASE_ID`: D1数据库ID
- `BUCKET_NAME`: R2存储桶名称

## 默认管理员账号

- 用户名：admin
- 密码：admin123

## 🎮 功能模块详解

### 1. 💞 首页 - 爱情计时器
- **实时计时**：精确到秒的在一起时间显示
- **纪念日设置**：可自定义特殊纪念日
- **背景美化**：支持背景图片上传和更换
- **移动端适配**：完美支持手机查看

### 2. 📅 时间轴
- **时间排序**：按时间倒序展示所有重要事件
- **智能分类**：约会/旅行/节日/日常等分类筛选
- **丰富内容**：每个事件包含标题、日期、地点、描述和图片
- **响应式设计**：手机端也能完美展示

### 3. 📸 相册管理
- **多相册支持**：创建不同主题的相册
- **批量上传**：支持多张图片同时上传
- **图片预览**：点击查看大图和幻灯片播放
- **云端存储**：所有图片安全存储在Cloudflare R2

### 4. ✅ 待办事项（新增！）
- **智能管理**：创建、编辑、删除待办事项
- **优先级系统**：5级优先级设置（低→高）
- **分类管理**：工作/生活/学习等分类
- **状态追踪**：待办/进行中/已完成状态切换
- **完成记录**：上传完成照片和记录心得体会
- **截止日期**：设置提醒，不再错过重要事项

### 5. 🍽️ 美食打卡
- **餐厅记录**：完整记录餐厅信息和位置
- **多维评分**：口味、环境、服务全方位评价
- **图片分享**：上传美食照片，记录美好时光
- **个人评价**：添加详细的美食体验描述

## 🛠️ 开发指南

### 📋 快速开始开发
1. **克隆项目**：`git clone [你的仓库地址]`
2. **安装依赖**：`npm install`
3. **启动开发**：`npm run dev`
4. **访问测试**：打开 http://localhost:3000

### 🚀 添加新功能

#### 1. 创建前端页面
- 在`src/pages/`下创建新的页面组件
- 使用现有的`ImageUploader`等组件
- 参考现有的样式规范

#### 2. 创建API接口
- 在`functions/api/`下创建对应的API文件夹
- 参考`todos/`或`albums/`的结构
- 使用`api.js`中的请求封装

#### 3. 数据库变更
1. 在`migrations/`中添加新的SQL文件
2. 使用`wrangler d1 execute`执行迁移
3. 更新API接口以支持新字段

### 🎯 最佳实践
- **代码风格**：遵循现有的React组件结构
- **图片管理**：使用R2上传工具，按功能分类存储
- **错误处理**：添加适当的错误提示和加载状态
- **响应式设计**：确保移动端体验良好

## ⚠️ 注意事项

### 🔐 安全配置
- **首次部署**：需要初始化数据库（见部署步骤）
- **R2配置**：确保存储桶权限设置正确
- **管理员密码**：生产环境务必修改默认密码

### 📊 性能优化
- **图片压缩**：自动压缩上传图片，节省存储空间
- **CDN加速**：使用Cloudflare全球CDN加速访问
- **缓存策略**：合理的浏览器缓存设置

### 🐛 常见问题
- **图片上传失败**：检查R2存储桶配置和CORS设置
- **数据库连接**：确保D1数据库已正确创建和初始化
- **部署失败**：检查wrangler.toml配置是否正确

## 🎉 更新日志

### v2.0.0 (当前版本)
- ✅ 新增待办事项功能
- 🎨 界面全面美化升级
- ☁️ 优化云存储结构
- 📱 增强移动端体验

### v1.0.0
- 🎯 基础功能上线
- 💞 爱情计时器
- 📅 时间轴和相册
- 🍽️ 美食打卡

## 📄 许可证

MIT License

---

**💖 用爱构建，记录美好时光**